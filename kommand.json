{
    "components": {
        "caption_table": {
            "type": "@dynamodb.table"
        },
        "policy": {
            "type": "@iam.policy",
            "document": {
                "Version": "2012-10-17",
                "Statement": [{
                    "Sid": "Vis",
                    "Effect": "Allow",
                    "Action": [
                        "iam:PassRole",
                        "sqs:ReceiveMessage",
                        "sqs:DeleteMessage",
                        "sqs:GetQueueAttributes"
                    ],
                    "Resource": "*"
                }]
            }
        },
        "captioning_lambda": {
            "type": "@lambda.function",
            "policies": ["@policy"],
            "container": true,
            "timeout": 15,
            "login_to_dockerhub": true,
            "environment_variables": {
                "TABLE_NAME": "@caption_table:props.name"
            }
        }
    },
    "repos": {
        "dynamodb": "https://github.com/cloudkommand/dynamodb",
        "lambda": "https://github.com/cloudkommand/lambda",
        "iam": "https://github.com/cloudkommand/iam"
    }
}
